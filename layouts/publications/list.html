{{ define "main" }}
<section class="section">
  <div class="container">
    <header class="section__header">
      <h1 class="section__title">Publications</h1>
      <p class="section__description">Research papers from the DCML group.</p>
    </header>
    
    {{ $pubs := .Pages }}
    {{ $years := slice }}
    {{ range $pubs }}
      {{ $year := .Params.year }}
      {{ if not (in $years $year) }}
        {{ $years = $years | append $year }}
      {{ end }}
    {{ end }}
    {{ $years = sort $years "value" "desc" }}
    
    {{ range $year := $years }}
    <div class="mb-lg">
      <h2 class="section__title" style="font-size: 1.25rem; color: var(--color-text-muted);">{{ $year }}</h2>
      {{ $yearPubs := where $pubs ".Params.year" $year }}
      {{ range $yearPubs }}
      <article class="publication">
        <h3 class="publication__title">
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </h3>
        <p class="publication__authors">{{ .Params.authors }}</p>
        <p class="publication__venue">{{ .Params.venue }}{{ with .Params.year }}, {{ . }}{{ end }}</p>
        <div class="publication__links">
          {{ with .Params.pdf }}
          <a href="{{ . }}" target="_blank" rel="noopener" class="publication__link">
            <i class="fas fa-file-pdf"></i> PDF
          </a>
          {{ end }}
          {{ with .Params.arxiv }}
          <a href="{{ . }}" target="_blank" rel="noopener" class="publication__link">
            <i class="ai ai-arxiv"></i> arXiv
          </a>
          {{ end }}
          {{ with .Params.code }}
          <a href="{{ . }}" target="_blank" rel="noopener" class="publication__link">
            <i class="fab fa-github"></i> Code
          </a>
          {{ end }}
          {{ with .Params.project }}
          <a href="{{ . }}" class="publication__link">
            <i class="fas fa-globe"></i> Project
          </a>
          {{ end }}
          {{ with .Params.video }}
          <a href="{{ . }}" target="_blank" rel="noopener" class="publication__link">
            <i class="fas fa-video"></i> Video
          </a>
          {{ end }}
        </div>
      </article>
      {{ end }}
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
